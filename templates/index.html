<!DOCTYPE html>
<html>
<head>
   <!-- Latest compiled and minified CSS -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css">
   <!-- Optional theme -->
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css">
   <style>
      \#map-container { height: 300px }
   </style>
   <title>XSky</title>
   <script>setInterval(function(){ location.reload(true) }, 60000);</script>
</head>
<body>
  <div class="container bs-docs-container">
     <h1><a href="/">XSky</a> State</h1>
      <table class="table table-condensed">
       <tbody>
         <tr>
           <td>Latitude</td>
           <td>$data->{gps}->{'lat'}</td>
         </tr>
         <tr>
           <td>Longtitude</td>
           <td>$data->{gps}->{'lon'}</td>
         </tr>
         <tr>
           <td>Altitude</td>
           <td>$data->{gps}->{'alt'}</td>
         </tr>
         <tr>
           <td>Course</td>
           <td>$data->{gps}->{'ept'}</td>
         </tr>
         <tr>
           <td>Speed</td>
           <td>$data->{gps}->{'speed'}</td>
         </tr>
       </tbody>
     </table>


    <div id="map-container" class="col-md-6" ></div>
    <script src="http://maps.google.com/maps/api/js?sensor=false"></script>
    <script>	
 
      function init_map() {
         var var_location = new google.maps.LatLng($data->{gps}->{'lat'},$data->{gps}->{'lon'});
         
         var var_mapoptions = {
            center: var_location,
            zoom: 18
         };
         
         var var_marker = new google.maps.Marker({
            position: var_location,
            map: var_map,
            title:"XSky Position"
         });
         
         var var_map = new google.maps.Map(document.getElementById("map-container"),
            var_mapoptions);
         
         var_marker.setMap(var_map);	
      }
 
      google.maps.event.addDomListener(window, 'load', init_map);
 
    </script>
   </div>
</body>
</html>
